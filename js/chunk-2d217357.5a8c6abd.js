(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d217357"],{c66d:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"mx-2"},[a("v-card",{staticClass:"my-2 elevation-4"},[a("v-card-title",[a("v-icon",{staticClass:"mb-1 mr-2"},[e._v("mdi-account")]),e._v("Profile ")],1),a("v-card-text",{staticClass:"text--primary mb-n2"},[a("v-row",{staticClass:"my-n2",attrs:{dense:""}},[a("v-col",{staticClass:"ml-1"},[a("span",{staticClass:"font-weight-bold"},[e._v("Discipline:")]),e._v(" "+e._s(e.userDiscipline)+" ")]),a("v-col",[a("span",{staticClass:"font-weight-bold"},[e._v("Start Year:")]),e._v(" "+e._s(e.userStartYear)+" (Sci'"+e._s(e.sciYear)+") ")])],1)],1),a("v-card-actions",[a("v-row",{staticClass:"mx-2 mb-n5",attrs:{dense:""}},[a("v-col",[a("v-select",{attrs:{outlined:"","menu-props":"offset-y",items:e.validDisciplines,label:"Change Discpline"},model:{value:e.discipline,callback:function(t){e.discipline=t},expression:"discipline"}})],1),a("v-col",[a("v-select",{attrs:{outlined:"","menu-props":"offset-y",items:e.validStartYears,label:"Change Start Year"},model:{value:e.startYear,callback:function(t){e.startYear=t},expression:"startYear"}})],1)],1)],1),a("v-expand-transition",[a("div",{directives:[{name:"show",rawName:"v-show",value:e.changedYearOrDiscipline,expression:"changedYearOrDiscipline"}]},[a("v-row",[a("v-spacer"),a("v-btn",{staticClass:"mb-3",attrs:{rounded:"",color:"green"},on:{click:e.updateProfile}},[e._v("Apply Changes")]),a("v-spacer")],1)],1)])],1),a("v-card",{staticClass:"elevation-4"},[a("v-card-title",[a("v-icon",{staticClass:"mr-2"},[e._v("mdi-security")]),e._v("Login ")],1),a("v-card-text",{staticClass:"text--primary mb-n6 mt-n4 ml-1"},[a("v-row",[a("v-col",{staticClass:"mt-2"},[a("span",{staticClass:"font-weight-bold"},[e._v("Email:")]),e._v(" "+e._s(e.userEmail)+" ")]),a("v-col",[a("v-tooltip",{attrs:{bottom:"","nudge-bottom":"-2","open-delay":"500"},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on;return[a("v-btn",e._g({attrs:{color:"error"},on:{click:function(t){return e.resetPassword()}}},r),[e._v("Change Password")])]}}])},[a("span",[e._v("Send password reset email")])])],1)],1)],1)],1),a("v-snackbar",{attrs:{color:"success",timeout:e.snackbarTimeout},model:{value:e.snackbarPassword,callback:function(t){e.snackbarPassword=t},expression:"snackbarPassword"}},[a("v-spacer"),e._v("Password reset email sent "),a("v-spacer")],1),a("v-snackbar",{attrs:{color:"success",timeout:e.snackbarTimeout},model:{value:e.snackbarProfile,callback:function(t){e.snackbarProfile=t},expression:"snackbarProfile"}},[a("v-spacer"),e._v("Profile updated successfully "),a("v-spacer")],1)],1)},s=[],i=(a("a4d3"),a("4de4"),a("4160"),a("e439"),a("dbb4"),a("b64b"),a("159b"),a("96cf"),a("1da1")),n=a("ade3"),c=a("2f62");function o(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function l(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?o(Object(a),!0).forEach((function(t){Object(n["a"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):o(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var d={name:"Profile",data:function(){return{discipline:void 0,startYear:void 0,snackbarPassword:!1,snackbarProfile:!1,snackbarTimeout:5e3}},computed:l({},Object(c["c"])(["validDisciplines","userDiscipline","userEmail","userStartYear","firstName","lastName","apiUrl"]),{validStartYears:function(){var e=(new Date).getFullYear(),t=6,a=[],r=t;while(r>=0)a.push(e-r),r--;return a},sciYear:function(){return String(this.userStartYear+4).substr(-2)},changedYearOrDiscipline:function(){return void 0!==this.discipline&&this.discipline!=this.userDiscipline||void 0!==this.startYear&&this.startYear!=this.userStartYear}}),methods:{updateProfile:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){var t,a,r,s,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=this.discipline?this.discipline:this.userDiscipline,a=this.startYear?this.startYear:this.userStartYear,r={firstName:this.firstName,lastName:this.lastName,discipline:t,startYear:a},s=this.apiUrl+"/update_user",e.prev=4,e.next=7,this.$axios.post(s,r,{withCredentials:!0});case 7:i=e.sent,i.data.isSuccess?(this.$store.commit("updateUserDiscipline",t),this.$store.commit("updateUserStartYear",a),this.$store.dispatch("reloadDisciplineInfo"),this.snackbarProfile=!0):(console.log(i),this.$store.commit("displayGlobalError","Error updating, please try again later")),e.next=15;break;case 11:e.prev=11,e.t0=e["catch"](4),console.log(e.t0),this.$store.commit("displayGlobalError","Error updating, please try again later");case 15:this.discipline=void 0,this.startYear=void 0;case 17:case"end":return e.stop()}}),e,this,[[4,11]])})));function t(){return e.apply(this,arguments)}return t}(),resetPassword:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){var t,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t={email:this.userEmail},console.log(t),e.prev=2,e.next=5,this.$axios.post("/forgotPassword",t,{withCredentials:!0});case 5:a=e.sent,console.log(a.data),a.data.isSuccess||(console.log(a),this.$store.commit("displayGlobalError","Error sending email, please try again later")),e.next=14;break;case 10:e.prev=10,e.t0=e["catch"](2),console.log(e.t0),this.$store.commit("displayGlobalError","Error sending email, please try again later");case 14:this.snackbarPassword=!0;case 15:case"end":return e.stop()}}),e,this,[[2,10]])})));function t(){return e.apply(this,arguments)}return t}()}},p=d,u=a("2877"),v=a("6544"),m=a.n(v),b=a("8336"),h=a("b0af"),f=a("99d9"),w=a("62ad"),g=a("0789"),y=a("132d"),k=a("0fd9"),P=a("b974"),C=a("2db4"),Y=a("2fa4"),O=a("3a2f"),_=Object(u["a"])(p,r,s,!1,null,null,null);t["default"]=_.exports;m()(_,{VBtn:b["a"],VCard:h["a"],VCardActions:f["a"],VCardText:f["c"],VCardTitle:f["d"],VCol:w["a"],VExpandTransition:g["a"],VIcon:y["a"],VRow:k["a"],VSelect:P["a"],VSnackbar:C["a"],VSpacer:Y["a"],VTooltip:O["a"]})}}]);
//# sourceMappingURL=chunk-2d217357.5a8c6abd.js.map